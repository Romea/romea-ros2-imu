<?xml version="1.0"?>
<launch>

   <arg name="mode"/>
   <arg name="imu_name"/>
   <arg name="robot_name"/>
   <arg name="robot_parent_link"/>

   <arg name="type"/>
   <arg name="model"/>
   <arg name="rate"/>
   <arg name="xyz"/>
   <arg name="rpy"/>

   <arg name="data_topic"/>
   <arg name="xacro_directory" default="$(env HOME)/.ros/log/latest/$(arg robot_name)/description"/>

   <param name="rate" value="$(arg rate)"/>
   <rosparam param="xyz" subst_value="True">$(arg xyz)</rosparam>
   <rosparam param="rpy" subst_value="True">$(arg rpy)</rosparam>

   <rosparam command="load" file="$(find romea_imu_description)/config/$(arg type)_$(arg model).yaml"/>

   <group if="$(eval arg('mode') != 'replay')">
      <param name="/records/$(arg robot_name)/$(arg imu_name)/data_topic" value="$(arg data_topic)"/>
   </group>

   <param name="/$(arg robot_name)/description/$(arg imu_name)" type="str"
          command="$(find romea_imu_bringup)/script/make_xacro.py
                   name=$(arg imu_name)
                   type=$(arg type)
                   model=$(arg model)
                   xyz='$(arg xyz)'
                   rpy='$(arg rpy)'
                   rate=$(arg rate)
                   prefix=$(arg robot_name)/
                   parent_link=$(arg robot_parent_link)
                   xacro_directory=$(arg xacro_directory)" />

</launch>
